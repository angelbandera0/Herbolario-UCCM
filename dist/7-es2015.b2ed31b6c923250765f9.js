(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Yj9t:function(e,t,n){"use strict";n.r(t);var o=n("ofXK"),r=n("tyNb"),i=n("fXoL"),s=n("Zr0/");let a=(()=>{class e{constructor(e,t,n){this.tokenStorageService=e,this.router=t,this.location=n}canActivate(e,t){return!this.tokenStorageService.isLoggedIn()&&"/"!==this.router.url||!this.tokenStorageService.isLoggedIn()&&"/"===this.router.url||(this.tokenStorageService.isLoggedIn()&&"/"===this.router.url?(this.location.back(),!1):void 0)}}return e.\u0275fac=function(t){return new(t||e)(i.Xb(s.a),i.Xb(r.f),i.Xb(o.g))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var c=n("R0Ic");class b{constructor(e,t){this.username=e,this.password=t}}var d=n("tk/3"),l=n("4WDQ");const g={headers:new d.d({"Content-Type":"application/json"})};let u=(()=>{class e{constructor(e){this.http=e,this.url=l.a.url}attemptAuth(e){return this.http.post(`${this.url}auth/login`,e,g)}singUp(e){return this.http.post(`${this.url}auth/register`,e,g)}}return e.\u0275fac=function(t){return new(t||e)(i.Xb(d.b))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=n("3Pt+"),m=n("psEu");function h(e,t){1&e&&(i.Tb(0,"div"),i.Ac(1,"El nombre de usuario es obligatorio."),i.Sb())}function p(e,t){if(1&e&&(i.Tb(0,"div",24),i.yc(1,h,2,0,"div",25),i.Sb()),2&e){i.dc();const e=i.rc(14);i.Bb(1),i.gc("ngIf",e.errors.required)}}function v(e,t){1&e&&(i.Tb(0,"div"),i.Ac(1,"Debe ingresar la contrase\xf1a."),i.Sb())}function S(e,t){1&e&&(i.Tb(0,"div"),i.Ac(1,"La contrase\xf1a debe poseer m\xe1s de 4 car\xe1cteres"),i.Sb())}function T(e,t){if(1&e&&(i.Tb(0,"div",24),i.yc(1,v,2,0,"div",25),i.yc(2,S,2,0,"div",25),i.Sb()),2&e){i.dc();const e=i.rc(19);i.Bb(1),i.gc("ngIf",e.errors.required),i.Bb(1),i.gc("ngIf",e.errors.minlength)}}function y(e,t){if(1&e&&(i.Tb(0,"alert",26),i.Ac(1),i.Sb()),2&e){const e=i.dc();i.Bb(1),i.Bc(e.errorMessage)}}function I(e,t){1&e&&(i.Tb(0,"button",27),i.Ac(1,"Iniciar Sesi\xf3n"),i.Sb())}function w(e,t){1&e&&(i.Tb(0,"button",27),i.Qb(1,"i",28),i.Sb())}const M=function(){return{"background-image":"url(../assets/img/bg-img/2.jpg)","min-height":"100vh",padding:"60px 0"}};class k{constructor(e,t,n,o,r){this.nombre=e,this.apellidos=t,this.username=n,this.email=o,this.password=r,this.role="trabajador"}setRole(e){this.role=e}}function A(e,t){1&e&&(i.Tb(0,"div"),i.Ac(1,"El nombre de la persona es obligatorio."),i.Sb())}function B(e,t){if(1&e&&(i.Tb(0,"div",30),i.yc(1,A,2,0,"div",31),i.Sb()),2&e){i.dc();const e=i.rc(14);i.Bb(1),i.gc("ngIf",e.errors.required)}}function C(e,t){1&e&&(i.Tb(0,"div"),i.Ac(1,"El apellido de la persona es obligatorio."),i.Sb())}function L(e,t){if(1&e&&(i.Tb(0,"div",30),i.yc(1,C,2,0,"div",31),i.Sb()),2&e){i.dc();const e=i.rc(19);i.Bb(1),i.gc("ngIf",e.errors.required)}}function j(e,t){1&e&&(i.Tb(0,"div"),i.Ac(1,"El nombre de usuario es obligatorio."),i.Sb())}function x(e,t){if(1&e&&(i.Tb(0,"div",30),i.yc(1,j,2,0,"div",31),i.Sb()),2&e){i.dc();const e=i.rc(24);i.Bb(1),i.gc("ngIf",e.errors.required)}}function P(e,t){1&e&&(i.Tb(0,"div"),i.Ac(1,"La direccion de correo es obligatoria."),i.Sb())}function q(e,t){if(1&e&&(i.Tb(0,"div",30),i.yc(1,P,2,0,"div",31),i.Sb()),2&e){i.dc();const e=i.rc(29);i.Bb(1),i.gc("ngIf",e.errors.required)}}function O(e,t){1&e&&(i.Tb(0,"div"),i.Ac(1,"Debe ingresar la contrase\xf1a."),i.Sb())}function U(e,t){1&e&&(i.Tb(0,"div"),i.Ac(1,"La contrase\xf1a debe poseer m\xe1s de 4 car\xe1cteres"),i.Sb())}function E(e,t){if(1&e&&(i.Tb(0,"div",30),i.yc(1,O,2,0,"div",31),i.yc(2,U,2,0,"div",31),i.Sb()),2&e){i.dc();const e=i.rc(34);i.Bb(1),i.gc("ngIf",e.errors.required),i.Bb(1),i.gc("ngIf",e.errors.minlength)}}function N(e,t){if(1&e&&(i.Tb(0,"alert",32),i.Ac(1),i.Sb()),2&e){const e=i.dc();i.Bb(1),i.Bc(e.errorMessage)}}function F(e,t){1&e&&(i.Tb(0,"button",33),i.Ac(1,"Crear cuenta"),i.Sb())}function Q(e,t){1&e&&(i.Tb(0,"button",33),i.Qb(1,"i",34),i.Sb())}const z=function(){return{"background-image":"url(../assets/img/bg-img/2.jpg)","min-height":"100vh",padding:"60px 0"}},X=[{path:"",component:(()=>{class e{constructor(e,t,n){this.authService=e,this.tokenStorage=t,this.router=n,this.form={},this.loading=!1,this.isLoggedIn=!1,this.isLoggedFailed=!1,this.errorMessage="",this.roles=[],this.show=!1}ngOnInit(){}onSubmit(){this.loading=!0,this.loginInfo=new b(this.form.username,this.form.password),console.log(this.loginInfo),this.authService.attemptAuth(this.loginInfo).subscribe(e=>{console.log(e.dataUser),this.tokenStorage.saveToken(e.accessToken),this.tokenStorage.saveUsername(e.dataUser.username),this.tokenStorage.saveAuthorities(e.dataUser.role),console.log(window.sessionStorage),this.router.navigate(["/app"])},e=>{console.log(e),this.errorMessage=e.error.message,this.isLoggedFailed=!0,this.loading=!1})}get stateName(){return this.show?"show":"hide"}toggle(){this.show=!this.show}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(u),i.Pb(s.a),i.Pb(r.f))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-login"]],decls:36,vars:9,consts:[[1,"login-block",3,"ngStyle"],[1,"container"],[1,"row"],[1,"col","col-md-6","offset-md-3",2,"background-color","white"],["name","form","novalidate","",1,"form-signin",3,"ngSubmit"],["f","ngForm"],[1,"text-center"],["src","../../../assets/img/core-img/logo.png","alt",""],[1,"h3","mb-3","font-weight-normal"],["for","inputEmail",1,""],["type","text","id","inputEmail","name","username","placeholder","Nombre de usuario","required","","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["username","ngModel"],["class","alert alert-danger",4,"ngIf"],["for","inputPassword",1,""],["type","password","id","inputPassword","name","password","placeholder","Contrase\xf1a","required","","minlength","4",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],[1,"checkbox","mb-3"],["routerLink","/app","routerLinkActive","active"],["routerLink","/register","routerLinkActive","active"],[1,"form-group"],["type","danger",4,"ngIf"],["class","btn  alazea-btn btn-block","type","submit",4,"ngIf"],["class","btn alazea-btn btn-block","type","submit",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],[1,"alert","alert-danger"],[4,"ngIf"],["type","danger"],["type","submit",1,"btn","alazea-btn","btn-block"],[1,"fa","fa-refresh","fa-spin"]],template:function(e,t){if(1&e){const e=i.Ub();i.Tb(0,"section",0),i.Tb(1,"div",1),i.Tb(2,"div",2),i.Tb(3,"div",3),i.Tb(4,"form",4,5),i.bc("ngSubmit",(function(){return i.tc(e),i.rc(5).form.valid&&t.onSubmit()})),i.Qb(6,"br"),i.Tb(7,"div",6),i.Qb(8,"img",7),i.Tb(9,"h1",8),i.Ac(10,"Iniciar Sesi\xf3n"),i.Sb(),i.Sb(),i.Tb(11,"label",9),i.Ac(12,"Nombre de Usuario:"),i.Sb(),i.Tb(13,"input",10,11),i.bc("ngModelChange",(function(e){return t.form.username=e})),i.Sb(),i.yc(15,p,2,1,"div",12),i.Tb(16,"label",13),i.Ac(17,"Contrase\xf1a:"),i.Sb(),i.Tb(18,"input",14,15),i.bc("ngModelChange",(function(e){return t.form.password=e})),i.Sb(),i.yc(20,T,3,2,"div",12),i.Qb(21,"br"),i.Tb(22,"div",16),i.Tb(23,"label"),i.Tb(24,"a",17),i.Ac(25,"Continuar como invitado."),i.Sb(),i.Tb(26,"p"),i.Ac(27,"No posees una cuenta?."),i.Tb(28,"a",18),i.Ac(29,"Crear una nueva cuenta."),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(30,"div",19),i.yc(31,y,2,1,"alert",20),i.yc(32,I,2,0,"button",21),i.yc(33,w,2,0,"button",22),i.Sb(),i.Tb(34,"p",23),i.Ac(35,"\xa9 2017-2020"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb()}if(2&e){const e=i.rc(5),n=i.rc(14),o=i.rc(19);i.gc("ngStyle",i.kc(8,M)),i.Bb(13),i.gc("ngModel",t.form.username),i.Bb(2),i.gc("ngIf",n.invalid&&n.dirty),i.Bb(3),i.gc("ngModel",t.form.password),i.Bb(2),i.gc("ngIf",o.invalid&&o.dirty),i.Bb(11),i.gc("ngIf",e.submitted&&t.isLoggedFailed),i.Bb(1),i.gc("ngIf",!t.loading),i.Bb(1),i.gc("ngIf",t.loading)}},directives:[o.l,f.s,f.j,f.k,f.a,f.p,f.i,f.l,o.k,f.g,r.i,r.h,m.a],styles:[".ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948;border-right:5px solid #42a948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #fe5d70;border-right:5px solid #fe5d70}"],data:{animation:[Object(c.j)("popOverState",[Object(c.g)("show",Object(c.h)({opacity:1})),Object(c.g)("hide",Object(c.h)({opacity:0})),Object(c.i)("show => hide",Object(c.e)("600ms ease-out")),Object(c.i)("hide => show",Object(c.e)("1000ms ease-in"))])]}}),e})(),canActivate:[a]},{path:"register",component:(()=>{class e{constructor(e,t,n){this.authService=e,this.tokenStorage=t,this.router=n,this.form={},this.loading=!1,this.isLoggedIn=!1,this.isLoggedFailed=!1,this.errorMessage="",this.roles=[],this.show=!1}ngOnInit(){this.tokenStorage.getToken()&&(this.isLoggedIn=!0)}onSubmit(){this.loading=!0,this.singUpInfo=new k(this.form.nombre,this.form.apellidos,this.form.username,this.form.email,this.form.password),console.log(this.singUpInfo),this.authService.singUp(this.singUpInfo).subscribe(e=>{console.log(e),this.loading=!1},e=>{console.log(e),this.errorMessage=e.error.message,this.isLoggedFailed=!0,this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(u),i.Pb(s.a),i.Pb(r.f))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-register"]],decls:50,vars:15,consts:[[1,"login-block",3,"ngStyle"],[1,"container"],[1,"row"],[1,"col","col-md-6","offset-md-3",2,"background-color","white"],["name","form","novalidate","",1,"form-signin",3,"ngSubmit"],["f","ngForm"],[1,"text-center"],["src","../../../assets/img/core-img/logo.png","alt",""],[1,"h3","mb-3","font-weight-normal"],["for","inputEmail",1,""],["type","text","id","inputEmail","name","nombre","placeholder","Nombre","required","","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","text","id","inputEmail","name","apellidos","placeholder","Apellidos","required","","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["apellidos","ngModel"],["type","text","id","inputEmail","name","username","placeholder","Username","required","","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["username","ngModel"],["type","email","id","inputEmail","name","email","placeholder","Direcci\xf3n de correo","required","","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","inputPassword",1,""],["type","password","id","inputPassword","name","password","placeholder","Password","required","","minlength","4",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],[1,"checkbox","mb-3"],["routerLink","/app","routerLinkActive","active"],["routerLink","/","routerLinkActive","active"],[1,"form-group"],["type","danger",4,"ngIf"],["class","btn  alazea-btn btn-block","type","submit",4,"ngIf"],["class","btn alazea-btn btn-block","type","submit",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],[1,"alert","alert-danger"],[4,"ngIf"],["type","danger"],["type","submit",1,"btn","alazea-btn","btn-block"],[1,"fa","fa-refresh","fa-spin"]],template:function(e,t){if(1&e){const e=i.Ub();i.Tb(0,"section",0),i.Tb(1,"div",1),i.Tb(2,"div",2),i.Tb(3,"div",3),i.Tb(4,"form",4,5),i.bc("ngSubmit",(function(){return i.tc(e),i.rc(5).form.valid&&t.onSubmit()})),i.Qb(6,"br"),i.Tb(7,"div",6),i.Qb(8,"img",7),i.Tb(9,"h1",8),i.Ac(10,"Please sign in"),i.Sb(),i.Sb(),i.Tb(11,"label",9),i.Ac(12,"Nombre:"),i.Sb(),i.Tb(13,"input",10,11),i.bc("ngModelChange",(function(e){return t.form.nombre=e})),i.Sb(),i.yc(15,B,2,1,"div",12),i.Tb(16,"label",9),i.Ac(17,"Apellidos:"),i.Sb(),i.Tb(18,"input",13,14),i.bc("ngModelChange",(function(e){return t.form.apellidos=e})),i.Sb(),i.yc(20,L,2,1,"div",12),i.Tb(21,"label",9),i.Ac(22,"Nombre de Usuario:"),i.Sb(),i.Tb(23,"input",15,16),i.bc("ngModelChange",(function(e){return t.form.username=e})),i.Sb(),i.yc(25,x,2,1,"div",12),i.Tb(26,"label",9),i.Ac(27,"Direcci\xf3n de Correo:"),i.Sb(),i.Tb(28,"input",17,18),i.bc("ngModelChange",(function(e){return t.form.email=e})),i.Sb(),i.yc(30,q,2,1,"div",12),i.Tb(31,"label",19),i.Ac(32,"Contrase\xf1a:"),i.Sb(),i.Tb(33,"input",20,21),i.bc("ngModelChange",(function(e){return t.form.password=e})),i.Sb(),i.yc(35,E,3,2,"div",12),i.Tb(36,"div",22),i.Tb(37,"label"),i.Tb(38,"a",23),i.Ac(39,"Continuar como invitado."),i.Sb(),i.Tb(40,"p"),i.Ac(41,"Ya posees una cuenta?."),i.Tb(42,"a",24),i.Ac(43,"Inicia sesi\xf3n."),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(44,"div",25),i.yc(45,N,2,1,"alert",26),i.yc(46,F,2,0,"button",27),i.yc(47,Q,2,0,"button",28),i.Sb(),i.Tb(48,"p",29),i.Ac(49,"\xa9 2017-2020"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb()}if(2&e){const e=i.rc(5),n=i.rc(14),o=i.rc(19),r=i.rc(24),s=i.rc(29),a=i.rc(34);i.gc("ngStyle",i.kc(14,z)),i.Bb(13),i.gc("ngModel",t.form.nombre),i.Bb(2),i.gc("ngIf",e.submitted&&n.invalid),i.Bb(3),i.gc("ngModel",t.form.apellidos),i.Bb(2),i.gc("ngIf",e.submitted&&o.invalid),i.Bb(3),i.gc("ngModel",t.form.username),i.Bb(2),i.gc("ngIf",e.submitted&&r.invalid),i.Bb(3),i.gc("ngModel",t.form.email),i.Bb(2),i.gc("ngIf",e.submitted&&s.invalid),i.Bb(3),i.gc("ngModel",t.form.password),i.Bb(2),i.gc("ngIf",e.submitted&&a.invalid),i.Bb(10),i.gc("ngIf",e.submitted&&t.isLoggedFailed),i.Bb(1),i.gc("ngIf",!t.loading),i.Bb(1),i.gc("ngIf",t.loading)}},directives:[o.l,f.s,f.j,f.k,f.a,f.p,f.i,f.l,o.k,f.g,r.i,r.h,m.a],styles:[".ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948;border-right:5px solid #42a948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #fe5d70;border-right:5px solid #fe5d70}"]}),e})()}];let _=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[r.j.forChild(X)],r.j]}),e})();n.d(t,"AuthModule",(function(){return D}));let D=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[o.b,_,m.b.forRoot(),f.f]]}),e})()}}]);